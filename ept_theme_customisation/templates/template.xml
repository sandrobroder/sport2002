<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="ept_subtotal_taxes_hide" inherit_id="website_sale.total">
        <xpath expr="//div[@id='cart_total']//table[hasclass('table')]//tr[@id='order_total_untaxed']"
               position="replace">
            <t t-if="not request.website.viewref('ept_theme_customisation.ept_hide_subtotal').active">
                <tr id="order_total_untaxed">
                    <td class="text-right border-0">Subtotal:</td>
                    <td class="text-xl-right border-0">
                        <span t-field="website_sale_order.amount_untaxed" class="monetary_field"
                              style="white-space: nowrap;"
                              t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"/>
                    </td>
                </tr>
            </t>
        </xpath>
        <xpath expr="//div[@id='cart_total']//table[hasclass('table')]//tr[@id='order_total_taxes']"
               position="replace">
            <t t-if="not request.website.viewref('ept_theme_customisation.ept_hide_subtotal').active">
                <tr id="order_total_taxes">
                    <td class="text-right border-0">Taxes:</td>
                    <td class="text-xl-right border-0">
                        <span t-field="website_sale_order.amount_tax" class="monetary_field"
                              style="white-space: nowrap;"
                              t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"/>
                    </td>
                </tr>
            </t>
        </xpath>
    </template>

    <template id="ept_hr_block_add" inherit_id="website_sale.short_cart_summary">
            <xpath expr="//div[hasclass('js_cart_summary')]//div[hasclass('card-body')]//hr[hasclass('d-xl-block')]" position="replace">
                <t t-if="not request.website.viewref('ept_theme_customisation.ept_hide_subtotal').active">
                    <hr class="d-none d-xl-block"/>
                </t>
            </xpath>
    </template>

    <template id="ept_hide_subtotal"/>

    <record id="ept_theme_customisation.ept_hide_subtotal_taxes" model="ir.ui.view">
        <field name="name">ept_hide_subtotal_taxes</field>
        <field name="inherit_id" search="[('key', '=', 'theme_clarico_vega.vega_theme_options')]"/>
        <field name="type">qweb</field>
        <field name="priority" eval="35"/>
        <field name="active">True</field>
        <field name="key">ept_theme_customisation.ept_hide_subtotal_taxes</field>
        <field name="arch" type="xml">
            <xpath expr="//div//we-checkbox[last()]" position="after">
                <we-checkbox string="Hide Subtotal and Taxes"
                             data-customize-website-views="ept_theme_customisation.ept_hide_subtotal"
                             data-reload="/"/>
            </xpath>
        </field>
    </record>
</odoo>

